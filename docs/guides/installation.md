---
sidebarDepth: 0
---

# Installation

- ðŸ‘‰ [Sample Lambda function](#ðŸ‘‰-bonus-sample-lambda-function)

> **Before starting, it is assumed that you have:**
> 
> - A project already setup with Prisma. If not, refer to the [Prisma Quickstart](https://www.prisma.io/docs/getting-started/setup-prisma) guide.
> - A database already created and ready to use with your Prisma project. [DigitalOcean](https://m.do.co/c/f1d537044c2b) generally offers good options for managed databases.

## ðŸŽ¬ Getting started video

[![Getting started with Prisma-AppSync](/prisma-appsync-video.png)](http://www.youtube.com/watch?v=v9wIJ02lLG0 "Getting started with Prisma-AppSync")

## Adding Prisma-Appsync into an existing project

### ðŸ‘‰ 1. Add `prisma-appsync` as dev dependency

```bash
# with yarn
yarn add prisma-appsync -D

# with npm
npm install prisma-appsync -D
```

### ðŸ‘‰ 2. Add the generator in your `schema.prisma` file

```typescript
generator appsync {
    provider = "prisma-appsync"
}
```

### ðŸ‘‰ 3. Run `npx prisma generate` as you'd normally do

Prisma-AppSync will generate the below:

```shell
.
+-- generated
|   +-- prisma-appsync
|   |   +-- client/ # API client Class
|   |   +-- docs/ # API Docs
|   |   +-- resolvers.yaml # AppSync Resolvers
|   |   +-- schema.gql # AppSync GQL Schema
```

### ðŸ‘‰ 4. Copy the boilerplate into your project

Executed from your project root, the following command will copy both an `handler.ts` file and a `cdk` folder into your current directory:

```shell
cp -r node_modules/prisma-appsync/boilerplate/ .
```

**The `handler.ts` file is a sample Lambda function handler:**

- To be used as principal datasource + resolver for your AWS AppSync API.
- It will contain your core business logic.

**The `cdk/` directory contains a sample AWS CDK template to:**

- Prepare and bundle the Lambda function handler.
- Setup AppSync using the files generated by Prisma-AppSync.
- Deploy the API on a specified Amazon AWS account.

### ðŸ‘‰ 5. Deploy the GraphQL API

#### Pre-requirements

Install the [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html) and configure your local environment to use your AWS account: [See guide here](https://docs.aws.amazon.com/cdk/latest/guide/cli.html#cli-environment) (`aws configure`). Also install the [AWS CDK](https://github.com/aws/aws-cdk) on your machine (`yarn global add aws-cdk` or `npm i -g aws-cdk`).

#### Deploy using AWS CDK

```shell
# go into the cdk directory
cd cdk

# install dependencies
yarn install

# edit the cdk config to your needs
# (mainly `PRISMA_CONNECTION_URL`)
code .env

# deploy into your AWS Account
cdk deploy
```

**ðŸš€ðŸš€ðŸš€ Done! Your GraphQL API is now ready to use.**

## ðŸ‘‰ Bonus: Sample Lambda function

If you are new to Prisma-AppSync, it is recommended to use the Boilerplate provided instead, as it provides a more advanced example (see previous section).

```typescript
// import PrismaAppSync client
import { PrismaAppSync } from './prisma/generated/prisma-appsync/client'

// initialise client
const app = new PrismaAppSync({
    connectionUrl: process.env.CONNECTION_URL,
    debug: true
})

// Lambda function handler
export const main = async (event: any, context: any) => {

    // parse the `event` from your Lambda function
    app.parseEvent(event)

    // handle CRUD operations / resolve query
    const result = await app.resolve()

    // close database connection
    await app.$disconnect()

    // return query result
    return Promise.resolve(result)

})
```
